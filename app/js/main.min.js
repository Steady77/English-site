!function(){"use strict";document.addEventListener("DOMContentLoaded",(()=>{AOS.init({once:!0});const e=document.querySelector(".menu-btn"),t=document.querySelector(".menu__list"),n=document.querySelectorAll(".menu__list-link");function o(){t.classList.remove("menu__list--active"),e.classList.remove("menu-btn--active"),document.body.classList.remove("--lock")}function c(e){e.preventDefault();const t=e.target;if(t.matches(".menu__list-link")){let e=0;const n=window.pageYOffset,o=t.getAttribute("href"),c=document.querySelector(o).getBoundingClientRect().top,i=t=>{e||(e=t);const o=t-e,s=c<0?Math.max(n-o/.2,n+c):Math.min(n+o/.2,n+c);window.scrollTo(0,s),(s<n+c||s>n+c)&&requestAnimationFrame(i)};requestAnimationFrame(i)}o()}e&&e.addEventListener("click",(function(){t.classList.toggle("menu__list--active"),e.classList.toggle("menu-btn--active"),document.body.classList.toggle("--lock")})),document.body.addEventListener("click",(e=>{e.target.closest(".menu")||o()})),new Swiper(".swiper",{loop:!0,speed:500,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0},autoplay:{delay:5e3,disableOnInteraction:!0}}),n.forEach((e=>{e.addEventListener("click",c)}));const i=document.querySelector(".modal"),s=i.querySelector(".modal__text");function r(e){document.body.style.overflow="hidden",s.textContent=e,i.classList.add("modal--show")}function l(){document.body.style.overflow="",i.classList.remove("modal--show")}i.addEventListener("click",(e=>{e.target&&l()})),document.addEventListener("keydown",(e=>{"Escape"===e.code&&l()}));const a=document.getElementById("form");function u(e){e.classList.add("--error")}function d(e){e.classList.remove("--error")}function m(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}a.addEventListener("submit",(async function(e){e.preventDefault();let t=function(e){let t=0,n=document.querySelectorAll(".--req");for(let e=0;e<n.length;e++){const o=n[e];d(o),o.classList.contains("contacts__form-input--email")?m(o)&&(u(o),t++):""===o.value&&(u(o),t++)}return t}(),n=new FormData(a);if(0===t){a.classList.add("--sending");let e=await fetch("sendmail.php",{method:"POST",body:n});e.ok?(r((await e.json()).message),a.reset(),a.classList.remove("--sending")):(r("Ошибка. Попробуйте снова."),a.classList.remove("--sending"))}else r("Заполните все поля")}));let q=[];const y=document.querySelectorAll(".quiz__answer"),_=document.querySelector(".quiz__box-header"),f=document.querySelector(".quiz__question"),v=document.querySelector(".quiz__text-a"),L=document.querySelector(".quiz__text-b"),p=document.querySelector(".quiz__text-c"),b=document.querySelector(".quiz__text-d"),g=document.querySelector(".quiz__btn"),h=document.querySelector(".quiz__pagination"),w=document.querySelector(".quiz__close-cross"),k=document.querySelector(".quiz__close-btn"),S=document.querySelector(".header__btn"),E=document.querySelector(".quiz");let x=0,z=0;function C(){E.classList.add("quiz--open"),document.body.classList.add("quiz--lock"),y.forEach((e=>{e.checked=!1})),h.textContent=`${x+1}/50`;const e=q[x];f.innerHTML=e.question,v.textContent=e.a,L.textContent=e.b,p.textContent=e.c,b.textContent=e.d}function A(){g.style.display="none",k.style.display="block"}function I(e,t){_.innerHTML=`\n      <h2 style="text-align: center; padding: 20px;">Ваш результат ${e} из 50 <br>\n      Рекомендуемый уровень: ${t}</h2>\n    `}function M(){E.classList.remove("quiz--open"),document.body.classList.remove("quiz--lock"),location.reload()}g.addEventListener("click",(()=>{const e=function(){let e;return y.forEach((t=>{t.checked&&(e=t.classList.item(2))})),e}();e&&(e===q[x].correct&&z++,x++,x<q.length?C():function(e){switch(!0){case e>=0&&e<=20:I(e,"Elementary"),A();break;case e>=21&&e<=30:I(e,"Pre-Intermediate"),A();break;case e>=31&&e<=40:I(e,"Intermediate"),A();break;case e>=41&&e<=50:I(e,"Upper-Intermediate"),A()}}(z))})),S.addEventListener("click",(function(){fetch("../quizdata.json").then((e=>e.json())).then((e=>{q=e,C()})).catch((e=>{console.error(e),r("Ошибка при загрузке данных. Попробуйте позже.")}))})),w.addEventListener("click",M),k.addEventListener("click",M)}))}();